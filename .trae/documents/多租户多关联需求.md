# 需求文档
## 介绍
本需求文档描述了在现有的多租户系统基础上，扩展支持用户多租户多归属、租户内权限管理和租户切换功能的需求。

## 需求

### 需求 1 - 用户多租户多归属
**用户故事：** 系统管理员可以将一个用户分配到多个租户，用户可以在多个租户中拥有不同的角色和权限。

#### 验收标准
1. 系统应支持一个用户属于多个租户
2. 用户在不同租户中可以有不同的权限和角色
3. 数据库设计应支持用户与租户的多对多关系

### 需求 2 - 租户内权限设置
**用户故事：** 租户管理员可以为用户设置在当前租户中的权限级别，包括创建者、管理者和普通用户。

#### 验收标准
1. 系统应提供三种基本权限级别：创建者、管理者、普通用户
2. 创建者拥有租户的最高权限，可以管理所有资源和用户
3. 管理者可以管理租户内的用户和资源，但不能删除租户
4. 普通用户只能访问和操作被授权的资源
5. 权限设置应持久化存储并在用户认证和授权过程中生效

### 需求 3 - 租户切换功能
**用户故事：** 属于多个租户的用户可以在登录后切换当前工作的租户，系统应根据当前选择的租户提供相应的功能和数据访问权限。

#### 验收标准
1. 用户登录成功后，系统应显示其所属的所有活跃租户列表
2. 用户可以从列表中选择一个租户作为当前工作租户
3. 系统应根据用户选择的租户更新上下文信息
4. 所有后续操作应基于当前选择的租户执行，数据访问应受到租户隔离限制
5. 切换租户不应要求用户重新登录
