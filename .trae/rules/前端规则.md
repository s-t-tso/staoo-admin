# 前端开发规则文档

## 技术栈规范
- **框架**：Vue 3
- **语言**：TypeScript
- **构建工具**：Vite
- **工作流配置**：Vue Flow
- **动态表单**：Epic Designer
- **UI组件库**：Element Plus

## 项目结构
前端项目应按照以下结构组织：

```
frontend-project
├── public/           # 静态资源
├── src/              # 源代码
│   ├── assets/       # 资源文件（图片、样式等）
│   ├── components/   # 公共组件
│   ├── layouts/      # 布局组件
│   ├── modules/      # 业务模块
│   ├── router/       # 路由配置
│   ├── store/        # 状态管理
│   ├── utils/        # 工具函数
│   ├── services/     # API服务
│   ├── types/        # TypeScript类型定义
│   ├── App.vue       # 根组件
│   ├── main.ts       # 入口文件
│   └── vite-env.d.ts # Vite环境类型定义
├── .gitignore        # Git忽略配置
├── package.json      # 项目依赖
├── tsconfig.json     # TypeScript配置
├── vite.config.ts    # Vite配置
└── README.md         # 项目说明
```

## 命名规范
- **文件命名**：小驼峰命名法，如`userList.vue`
- **组件命名**：大驼峰命名法，如`UserCard.vue`
- **变量命名**：小驼峰命名法，如`userName`
- **常量命名**：全大写，下划线分隔，如`MAX_COUNT`
- **接口命名**：I开头的大驼峰命名法，如`IUserInfo`
- **函数命名**：小驼峰命名法，如`getUserList()`

## Vue 3 开发规范
### 组件开发
- 优先使用Composition API
- 组件应保持单一职责
- 合理使用props和emits进行组件通信
- 避免过度使用provide/inject
- 使用Teleport处理模态框等跨组件渲染场景
- 使用Suspense处理异步组件加载

### Setup语法糖
- 优先使用`<script setup>`语法糖
- 合理使用ref、reactive、computed、watch等响应式API
- 生命周期钩子应在setup中使用，如onMounted、onUnmounted
- 组件间共享逻辑应抽离为Composable函数

## TypeScript 规范
- 所有变量、函数、组件Props等必须有明确的类型定义
- 避免使用any类型，除非有充分理由
- 合理使用联合类型、交叉类型、泛型等高级特性
- 使用interface定义对象类型
- 使用type定义联合类型、交叉类型等
- 类型定义应放在types目录下，方便复用

## Vite 配置规范
- 配置文件应清晰明了，分类管理
- 合理配置别名，简化导入路径
- 配置开发服务器代理，解决跨域问题
- 配置构建优化，如代码分割、CDN加速等
- 配置环境变量，区分开发、测试、生产环境

## Vue Flow 工作流配置
### 基础配置
- 遵循Vue Flow官方最佳实践
- 合理使用Nodes、Edges、Controls等核心概念
- 自定义节点应扩展BaseNode或使用自定义组件
- 自定义连线应扩展BaseEdge或使用自定义组件

### 动态流程设计
- 使用Vue Flow构建可视化工作流设计器
- 支持拖拽添加节点、连线、删除等操作
- 支持节点属性编辑、连线条件配置等功能
- 流程配置应支持保存、加载、导出等操作
- 流程配置数据结构应清晰，便于与后端交互

## Epic Designer 动态表单
### 表单设计器
- 使用Epic Designer构建可视化表单设计器
- 支持拖拽添加表单项、调整顺序等操作
- 支持表单项属性编辑、验证规则配置等功能
- 支持表单布局配置、分组等高级功能

### 表单渲染器
- 实现高性能的动态表单渲染器
- 支持各种类型的表单项，如输入框、选择器、日期选择器等
- 支持表单项之间的联动、条件显示等高级功能
- 支持表单验证、提交等核心功能

## 状态管理规范
- 优先使用Pinia进行状态管理
- 状态应按模块划分，避免单一store过于庞大
- 合理使用getters、actions进行数据处理
- 避免在组件中直接修改store状态，应通过actions
- 跨组件共享的状态才放入store，局部状态应放在组件内部

## 路由规范
- 路由配置应按业务模块分组
- 使用嵌套路由实现复杂页面结构
- 合理使用路由守卫进行权限控制
- 路由参数应添加类型定义
- 支持动态路由、懒加载等高级特性

## API 调用规范
- API服务应封装在services目录下
- 统一的请求/响应拦截器处理
- 请求方法应返回Promise，便于处理异步操作
- 合理处理请求错误、超时等异常情况
- 请求参数和响应数据应有明确的类型定义

## 样式规范
- 优先使用CSS Modules或Scoped CSS
- 合理使用CSS预处理器（如SCSS、Less）
- 建立统一的样式变量系统，确保视觉一致性
- 避免使用行内样式，除非有充分理由
- 响应式设计应使用媒体查询或CSS Grid/Flexbox

## 代码质量规范
- 遵循ESLint、Prettier等代码规范工具
- 避免冗余代码，提取可复用的逻辑
- 组件拆分应合理，避免过大的组件
- 注释应清晰明了，解释复杂逻辑和业务背景
- 定期进行代码审查，提高代码质量

## 性能优化
- 合理使用虚拟列表、懒加载等技术处理大量数据
- 避免不必要的渲染，使用memo、computed等优化
- 图片应进行压缩、懒加载处理
- 避免在mounted、updated等生命周期钩子中执行耗性能操作
- 合理使用缓存，减少重复请求

## 安全规范
- 输入数据必须进行校验，防止XSS攻击
- API请求应进行认证和授权校验
- 敏感数据传输应进行加密
- 避免使用eval等危险函数
- 合理处理用户上传的文件，避免安全隐患

## 文档规范
- 项目应包含详细的README.md
- 组件应包含props、events、slots等API文档
- 复杂业务逻辑应有流程图或文字说明
- 接口文档应清晰描述请求参数、响应数据等
- 定期更新文档，确保与代码同步

## 测试规范
- 编写单元测试和集成测试
- 测试应覆盖核心业务逻辑和常见场景
- 使用Jest、Vue Test Utils等测试工具
- 测试文件应与被测试文件放在同一目录下
- 定期运行测试，确保代码质量

## 开发工作流
- 本地开发 -> 代码提交 -> 代码审查 -> 持续集成 -> 测试环境部署 -> 生产环境部署
- 遵循Git工作流，合理使用分支
- 提交信息应清晰描述变更内容
- 定期进行代码合并，避免冲突